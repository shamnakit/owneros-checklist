/* src/styles/globals.css */

/* ต้องอยู่บนสุดเสมอ */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ================== Moonship · GLOBAL DARK ================== */

/* Tokens (ปรับตาม mockup) */
:root{
  /* Space BG */
  --bg-space:#0A1020;        /* กรมท่าเข้ม */
  --bg-navy:#0E1B2E;         /* กรมท่าอ่อน */
  --text-starlight:#EAF2FF;  /* ตัวหนังสือหลัก */

  /* Accents */
  --accent-astroBlue:#9CC3FF;  /* ลิงก์/หัวข้อรอง */
  --accent-ionTeal:#2DE1C2;    /* คุณภาพ */
  --accent-lunarCyan:#2AA9FF;  /* ความคืบหน้า */
  --accent-orbitPink:#FF5B99;  /* ดอนัท/จุดเน้น */

  /* Category */
  --c-strategy:#FFD54A;
  --c-structure:#2DD4BF;
  --c-sop:#9D7CFF;        /* ม่วงสว่างขึ้น */
  --c-hr:#22C55E;
  --c-finance:#F6C453;    /* amber นวล */
  --c-sales:#FF7A1A;

  /* Status */
  --c-go:#2DE1C2;
  --c-hold:#F6C453;
  --c-nogo:#FF6B6B;

  /* Surfaces/lines */
  --text-1:#F7FAFF;
  --text-2:#EAF2FF;
  --text-3:#C9D6EA;
  --line:rgba(255,255,255,.16);
  --surface-1:rgba(255,255,255,.06);
  --surface-2:rgba(255,255,255,.10);
}

/* Base: background + type + elements */
@layer base{
  html,body,#__next{
    min-height:100vh;
    color:var(--text-2);
    background:
      radial-gradient(1200px 800px at 10% 10%, rgba(255,255,255,.06), transparent 60%),
      radial-gradient(800px 600px at 80% 30%, rgba(255,255,255,.04), transparent 60%),
      linear-gradient(180deg,var(--bg-space),var(--bg-navy)) !important;
  }

  /* Thai-friendly sans + scale */
  :root{ --font-sans: ui-sans-serif,-apple-system,BlinkMacSystemFont,"Inter","Noto Sans Thai","Sarabun","Segoe UI",Roboto,"Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"; }
  html{ font-family:var(--font-sans); letter-spacing:.005em; }
  body{ font-size:15px; line-height:1.65; }

  h1{ font-size:clamp(28px,2.4vw,36px); line-height:1.2;  font-weight:800; color:var(--text-1); }
  h2{ font-size:clamp(22px,1.8vw,28px); line-height:1.25; font-weight:700; color:var(--text-1); }
  h3{ font-size:clamp(18px,1.4vw,22px); line-height:1.30; font-weight:700; color:var(--text-1); }
  small,.text-xs{ font-size:12.5px; line-height:1.45; color:var(--text-3); }

  a{ color:var(--accent-astroBlue); } 
  a:hover{ color:#CFE0FF; text-decoration:underline; }

  hr{ border-color:rgba(255,255,255,.12); }

  /* Tables */
  table{ width:100%; border-collapse:collapse; }
  th,td{ padding:.625rem .75rem; border-bottom:1px solid rgba(255,255,255,.10); }
  th{ color:#EAF2FF; background:rgba(255,255,255,.04); text-align:left; }
  tbody tr:nth-child(odd){ background:rgba(255,255,255,.03); }

  /* Forms */
  input,select,textarea{
    @apply text-sm;
    color:rgba(230,237,245,.95);
    background-color:rgba(255,255,255,.05);
    border:1px solid rgba(255,255,255,.10);
    border-radius:.5rem;
  }
  input::placeholder,textarea::placeholder{ color:#94A3B8; }
  input:focus,select:focus,textarea:focus{
    outline:none; border-color:rgba(108,163,255,.45);
    box-shadow:0 0 0 3px rgba(108,163,255,.25);
  }

  /* Code */
  code{ background:rgba(255,255,255,.06); padding:.15rem .35rem; border-radius:.375rem; }
  pre{ background:rgba(0,0,0,.35); color:var(--text-2); padding:.875rem 1rem; border-radius:.75rem; border:1px solid rgba(255,255,255,.08); overflow:auto; }
}

/* Helper */
.bg-space{
  background:
    radial-gradient(1200px 800px at 10% 10%, rgba(255,255,255,.06), transparent 60%),
    radial-gradient(800px 600px at 80% 30%, rgba(255,255,255,.04), transparent 60%),
    linear-gradient(180deg,var(--bg-space),var(--bg-navy));
}

/* Components */
@layer components{
  .card-moon{ @apply rounded-2xl border bg-white/5 backdrop-blur-sm; border-color:rgba(255,255,255,.10); }

  .chip{ @apply inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-xs font-medium; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); }
  .chip-go{   color:var(--c-go);   border-color:rgba(34,197,94,.40); }
  .chip-hold{ color:var(--c-hold); border-color:rgba(245,158,11,.40); }
  .chip-nogo{ color:var(--c-nogo); border-color:rgba(239,68,68,.40); }

  /* Inputs/Buttons tuned for dark */
  .input-dark{ background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.12); color:var(--text-2); border-radius:.5rem; padding:.5rem .75rem; }
  .input-dark::placeholder{ color:#94A3B8; }
  .input-dark:focus{ outline:none; border-color:rgba(108,163,255,.45); box-shadow:0 0 0 3px rgba(108,163,255,.22); }

  .btn-ghost{ background:rgba(255,255,255,.06); border:1px solid var(--line); color:var(--text-2); border-radius:.6rem; padding:.5rem .9rem; }
  .btn-ghost:hover{ background:rgba(255,255,255,.10); }

  .btn-primary{
    background:linear-gradient(180deg,#2F6BFF,#2251D8);
    color:white; border:1px solid rgba(255,255,255,.12);
    border-radius:.7rem; padding:.55rem 1rem; font-weight:600;
  }
  .btn-primary:hover{ filter:brightness(1.06); }

  .btn-success{
    background:linear-gradient(180deg,#18B563,#118A4B);
    color:white; border:1px solid rgba(255,255,255,.12);
    border-radius:.7rem; padding:.55rem 1rem; font-weight:600;
  }

  .badge-soft{
    background:rgba(255,255,255,.08);
    border:1px solid var(--line);
    color:var(--text-2);
    padding:.25rem .6rem; border-radius:9999px; font-size:.78rem; font-weight:600;
  }
}

/* Better borders for chips on supported browsers */
@supports (color: oklab){
  .chip-go{   border-color:color-mix(in oklab,var(--c-go) 40%,white 60%); }
  .chip-hold{ border-color:color-mix(in oklab,var(--c-hold) 40%,white 60%); }
  .chip-nogo{ border-color:color-mix(in oklab,var(--c-nogo) 40%,white 60%); }
}

/* Category glows */
.glow-strategy{ box-shadow:0 0 0 1px rgba(255,213,74,.25), 0 8px 32px rgba(255,213,74,.15); }
.glow-structure{box-shadow:0 0 0 1px rgba(45,212,191,.25), 0 8px 32px rgba(45,212,191,.15); }
.glow-sop{      box-shadow:0 0 0 1px rgba(157,124,255,.25), 0 8px 32px rgba(157,124,255,.15); }
.glow-hr{       box-shadow:0 0 0 1px rgba(34,197,94,.25),  0 8px 32px rgba(34,197,94,.15); }
.glow-finance{  box-shadow:0 0 0 1px rgba(246,196,83,.25), 0 8px 32px rgba(246,196,83,.15); }
.glow-sales{    box-shadow:0 0 0 1px rgba(255,122,26,.25), 0 8px 32px rgba(255,122,26,.15); }

/* Utilities: neutralizer + readability + charts + progress */
@layer utilities{
  /* Neutralize light util classes (ไม่จับ bg-white/5) */
  :is([class~="bg-white"],[class~="bg-slate-50"],[class~="bg-gray-50"],[class~="bg-slate-100"],[class~="bg-gray-100"]){
    background-color:transparent !important; background-image:none !important;
  }
  :is([class~="text-slate-800"],[class~="text-gray-800"],[class~="text-slate-700"],[class~="text-gray-700"]){
    color:var(--text-starlight) !important;
  }
  :is([class~="border-slate-200"],[class~="border-gray-200"],[class~="border-slate-300"],[class~="border-gray-300"]){
    border-color:rgba(255,255,255,.12) !important;
  }

  /* Readability */
  .muted{ color:var(--text-3) !important; }
  .subtle{ color:var(--text-3) !important; } /* fallback */
}
@supports (color: oklab){
  .subtle{ color:color-mix(in oklab,var(--text-3) 85%,white 15%) !important; }
}
@layer utilities{
  :is(.text-slate-500,.text-gray-500){ color:rgba(226,232,240,.78) !important; }
  :is(.text-slate-600,.text-gray-600){ color:rgba(232,238,247,.88) !important; }

  hr,.divide-y > :not([hidden]) ~ :not([hidden]){ border-color:var(--line) !important; }
  :is(.border,.ring-1){ border-color:var(--line); }

  .surface{ background:var(--surface-1); border:1px solid var(--line); border-radius:.75rem; }
  .surface-strong{ background:var(--surface-2); border:1px solid var(--line); border-radius:.75rem; }
  .bubble-dark{ background:rgba(15,23,42,.92) !important; color:var(--text-2) !important; border:1px solid var(--line) !important; }

  /* Progress bars (ตาม mockup) */
  .progress-track{ background:rgba(255,255,255,.20); border-radius:9999px; }
  .progress-quality{ 
    background:linear-gradient(90deg,var(--accent-ionTeal) 0%, #7CF9E4 100%);
    border-radius:9999px;
  }
  .progress-completion{
    background:linear-gradient(90deg,var(--accent-lunarCyan) 0%, #9CD8FF 100%);
    border-radius:9999px;
  }

  /* Donut chart ring */
  .ring-track{ stroke:rgba(255,255,255,.16); }
  .ring-accent{ stroke:var(--accent-orbitPink); }

  /* Charts (Recharts) */
  .recharts-text{ fill:var(--text-2); }
  .recharts-cartesian-grid-horizontal line,
  .recharts-cartesian-grid-vertical line,
  .recharts-polar-grid-concentric{ stroke:rgba(255,255,255,.16); }
  .recharts-polar-angle-axis-tick-value{ fill:var(--text-2); }
  .recharts-tooltip-wrapper .recharts-default-tooltip{
    background:rgba(15,23,42,.90); color:var(--text-2);
    border:1px solid var(--line); border-radius:.5rem;
  }

  ::selection{ background:rgba(108,163,255,.25); color:var(--text-starlight); }
}

/* ===== Moonship · Dashboard Readability Boost ===== */
@layer utilities {
  /* ตัวเลขเมตริก (ใหญ่/คม/มีเงานุ่ม) */
  .metric-number      { font-weight: 800; font-size: clamp(22px, 2.2vw, 28px); color: var(--text-1); text-shadow: 0 0 14px rgba(255,255,255,.12); letter-spacing: -.01em; }
  .metric-number-xl   { font-weight: 800; font-size: clamp(28px, 3vw, 40px);  color: var(--text-1); text-shadow: 0 0 18px rgba(255,255,255,.14); letter-spacing: -.012em; }
  .metric-label       { font-size: 12px;  color: var(--text-3); text-transform: uppercase; letter-spacing: .08em; }

  /* ตัวเลขกลางวงกลม (ดอนัท/ราดาร์กลาง) */
  .donut-center {
    position: absolute; inset: 0; display: grid; place-items: center;
    color: var(--text-1); font-weight: 800; font-size: clamp(18px, 2vw, 26px);
    text-shadow: 0 0 14px rgba(255,255,255,.14);
    pointer-events: none;
  }

  /* พาเนลสรุป/ข้อเสนอแนะ (GAP & ACTION) */
  .panel-dark {
    background: var(--surface-2);
    border: 1px solid var(--line);
    border-radius: 1rem;
  }
  .panel-title {
    color: var(--text-1);
    font-weight: 700;
    letter-spacing: .02em;
  }
  .panel-note { color: var(--text-2); opacity: .92; }

  /* ปุ่มยอดนิยม */
  .btn-primary {
    background: linear-gradient(180deg,#2F6BFF,#2251D8);
    color: #fff; border: 1px solid rgba(255,255,255,.12);
    border-radius: .7rem; padding: .55rem 1rem; font-weight: 600;
  }
  .btn-primary:hover { filter: brightness(1.06); }
}
